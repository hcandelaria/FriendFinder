<!DOCTYPE html>
<html>
<head>
	<title>Survey</title>
<!-- Compiled and minified CSS -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
</head>

<body class="indigo darken-4">
<!--Nav bar-->
	<nav>
		 <div class="nav-wrapper blue-grey darken-4">
			 <a href="index" class="brand-logo center grey-text">Friend Finder</a>
			 <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons grey-text">menu</i></a>
			 <ul class="right hide-on-med-and-down">
				 <li>
					 <a href="/" class="waves-effect waves-light btn indigo darken-4 homeBtn">
						 <i class="small material-icons grey-text center">home</i>
					 </a>
				 </li>
				 <li>
					 <a href="/survey" class="waves-effect waves-light btn indigo darken-4 surveyBtn">
						 <i class="small material-icons grey-text center">chat</i>
					 </a>
				 </li>
			 </ul>
			 <ul class="side-nav right blue-grey darken-4" id="mobile-demo">
				 <li>
					 <a href="/" class="waves-effect waves-light btn indigo darken-4 grey-text homeBtn">
						 <i class="small material-icons grey-text center">home</i>Home
					 </a>
				 </li>
				 <li>
					 <a href="/survey" class="waves-effect waves-light btn indigo darken-4  grey-text surveyBtn">
						 <i class="small material-icons grey-text center">chat</i>Survey
					 </a>
				 </li>
			 </ul>
		 </div>
	</nav>
<!--Body-->
<br>
<main>
	<!--Info-->
	<div class="row">
		<form class="col s6 offset-s3">
			<div class="row">
				<div class="input-field col s6">
					<i class="material-icons grey-text prefix">account_circle</i>
					<input id="icon_prefix" type="text" class="validate grey-text">
					<label for="icon_prefix" class="grey-text">First Name</label>
				</div>
				<div class="input-field col s6">
					<i class="material-icons grey-text prefix">cloud_upload</i>
					<input id="cloud_upload" type="text" class="validate grey-text">
					<label for="cloud_upload" class="grey-text">Upload photo</label>
				</div>
				<div class="col s12 center">
					<div class="row">
						<i class="medium center material-icons grey-text">live_help</i>
					</div>
				</div>
			</div>
		</form>
		<!--Carousel holding questions-->
	  <div class="carousel carousel-slider center" data-indicators="true">
	    <div class="carousel-item indigo darken-4 grey-text" href="#one!">
	      <h2 style="margin: 0px;">Question 1</h2>
	      <p class="grey-text">Your mind is always buzzing with unexplored ideas and plans.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
						<option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
	    </div>
	    <div class="carousel-item indigo darken-4 grey-text" href="#two!">
	      <h2 style="margin: 0px;">Question 2</h2>
	      <p class="grey-text">Generally speaking, you rely more on your experience than your imagination.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
	    <div class="carousel-item indigo darken-4 grey-text" href="#three!">
	      <h2 style="margin: 0px;">Question 3</h2>
	      <p class="grey-text">You find it easy to stay relaxed and focused even when there is some pressure.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#four!">
	      <h2 style="margin: 0px;">Question 4</h2>
	      <p class="grey-text">You rarely do something just out of sheer curiosity.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#five!">
				<h2 style="margin: 0px;">Question 5</h2>
				<p class="grey-text">People can rarely upset you.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#six!">
				<h2 style="margin: 0px;">Question 6</h2>
				<p class="grey-text">Your mind is always buzzing with unexplored ideas and plans.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#seven!">
				<h2 style="margin: 0px;">Question 7</h2>
				<p class="grey-text">Generally speaking, you rely more on your experience than your imagination.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#eight!">
				<h2 style="margin: 0px;">Question 8</h2>
				<p class="grey-text">You rarely get carried away by fantasies and ideas.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#nine!">
				<h2 style="margin: 0px;">Question 9</h2>
				<p class="grey-text">You think that everyoneâ€™s views should be respected regardless of whether they are supported by facts or not.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
			<div class="carousel-item indigo darken-4 grey-text" href="#ten!">
				<h2 style="margin: 0px;">Question 10</h2>
				<p class="grey-text">feel more energetic after spending time with a group of people.</p>
				<div class="blue-grey darken-4 input-field col s2 offset-s5">
			    <select class="question blue-grey darken-4">
			      <option value="1" class="grey-text">1 (Strongly Disagreed)</option>
			      <option value="2">2</option>
						<option value="3">3</option>
						<option value="4">4</option>
						<option value="5">5 (Strongly Agreed)</option>
			    </select>
			  </div>
			</div>
	  </div>
		<div class="carousel-fixed-item center">
			<a class="waves-effect waves-light btn blue-grey darken-4 grey-text disabled" id='submitBtn'>
				<i class="small right material-icons grey-text">mail</i>submit</a>
		</div>
</main>
	<!-- Modal Structure -->
	<div id="modal1" class="col s12 modal">
		<div class="blue-grey darken-4 card-panel grey lighten-5 z-depth-">
			<div class="row valign-wrapper">
				<div class="col s7">
					<img src="http://omgtoptens.com/wp-content/uploads/2012/09/albert-einstein-pic.jpg" alt="" class="circle responsive-img" id='modalImg'>
				</div>
				<div class="col s5">
					<h2 id='modalName'>Hector</h2>
					<span class="grey-text">
						We found you a friend!
					</span>
				</div>

			</div>
		</div>
	</div>

<!--Footer-->
	<footer class="page-footer blue-grey darken-4">
		<div class="container">
			<div class="row">
				<div class="col l6 s12">
					<p class="grey-text ">Design & coded by: Hector Candelaria</p>
				</div>
				<div class="col l4 offset-l2 s12">
					<ul>
						<li><a class="grey-text" target="_blank" href="https://www.linkedin.com/in/hector-candelaria-986347136/">linkedin</a></li>
						<br>
						<li><a class="grey-text" target="_blank" href="https://github.com/hcandelaria">github</a></li>
					</ul>
				</div>
			</div>
		</div>
	</footer>
<!--Style-->
<style>
	body {
		display: flex;
		min-height: 100vh;
		flex-direction: column;
	}
	main {
			flex: 1 0 auto;
	}
	.dropdown-content{
		background-color: #263238;
	}
	.card-panel{
		margin: 0px;
	}
</style>

<!-- jquery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<!-- materialize -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
<script>
	$(document).ready(function () {


		//Side-nav
		$(".button-collapse").sideNav();
		//Carousel
		$('.carousel.carousel-slider').carousel({fullWidth: true});
		$('select').material_select();
		//Modal
		$('.modal').modal();

		$(document).on('click', function(){
			if($('#icon_prefix').val() !== '' && $('#cloud_upload').val() !== ''){
				if($('#submitBtn').hasClass('disabled')){
					$('#submitBtn').removeClass('disabled');
				}
			}else{
				if(!$('#submitBtn').hasClass("disabled")) {
					$('#submitBtn').addClass('disabled');
				}
			}
		});
		//
		const getMatch = (friends) =>{

			return match;
		};
		$(document).on('click', '#submitBtn', function(){
			event.preventDefault();

			var friendData = {
				name: ($('#icon_prefix').val().trim()),
				url: ($('#cloud_upload').val().trim()),
				scores: []
			};

			$('select').each(function(){
				points = parseFloat($(this).val());
				friendData.scores.push(points);
			});
			console.log(friendData);
			// AJAX post the data to the friends.js
			$.post("/api/friends", friendData, function(res){

					console.log(res);

					// let match = null;
					// let comparison = null;
          //
					// for(var i = 0; i < res.length; i++){
					// 	console.log(res[i]);
          //
					//  	let tempMatch = 0;
					//  	let scores = res[i].scores;
          //
					// 	console.log(scores);
          //
					// 	for(var j = 0; j < scores.length; j++){
					// 		tempMatch += Math.abs( parseFloat(scores[j]) - friendData.scores[j]);
					// 	}
					// 	if(comparison === null){
					// 		comparison = tempMatch;
					// 		match = res[i];
					// 	}else if (tempMatch < comparison){
					// 		comparison = tempMatch;
					// 		match = res[i];
					// 	}
					// }

					displayModal(res);

				});
		});
		function displayModal(friend){
			console.log(friend);
			$('#modalName').text(friend.name);
			$('#modalImg').attr('src',friend.url);
			$('#modal1').modal('open');
		}
	});

</script>
</body>
</html>
